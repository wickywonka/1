---
layout: post
title: '有关“端口转发”和“DMZ”二三事（二）：端口转发、DMZ'
date: 2017-12-23
author: 王维
tags: 网络或许实用技术
---

　　先说端口转发吧，端口转发是转发一个网络端口从一个网络节点到另一个网络节点的行为，其使一个外部用户从外部经过一个被激活的NAT路由器到达一个在私有内部IP地址（局域网内部）上的一个端口。举个栗子来说就是，我用个人电脑建了一个服务器，想让别人访问，但一般情况下别人是不能直接访问的，于是我在路由器的防火墙上映射一个端口，比如说80端口，这样外部人员在访问的时候所发出的请求数据便会通过80端口，到达我的服务器，然后我的服务器就可以根据请求做出回应。所以可以简单的理解成端口转发就是在墙上开了一道门，这样人们才能进出。

　　然后说说DMZ，DMZ是英文“demilitarized zone”的缩写，中文名称为“隔离区”，也称“非军事化区”。DMZ可以理解为一个不同于外网或内网的特殊网络区域，DMZ内通常放置一些不含机密信息的公用服务器，比如Web、Mail、FTP等。这样来自外网的访问者可以访问DMZ中的服务，但不可能接触到存放在内网中的公司机密或私人信息等，即使DMZ中服务器受到破坏，也不会对内网中的机密信息造成影响。基本原理就是把DMZ内设备的所有的端口都暴露在外网上，任人进出，却不会对非DMZ设备造成影响。但是，像我这种，只想和朋友联机玩玩游戏的人来说*（有些游戏的联机模式是P2P的，这些联机数据要走特定的端口，但每个游戏又不一样，为了一劳永逸，直接把自己的电脑拖入DMZ是最方便的）*，就要三思而后行，慎重考虑一下再做决定。

这两种功能具体怎么做就不详细说了，因为路由器的品牌不一样，实际操作也不一样，就用我的路由器为例简单的说一下：

### 端口转发
![](/assets/img/2017-12-23-1.jpg)

通信端口范围：暴露在外网上的端口，被人用来访问的大门
本地IP：用来做服务器的设备IP,不过是路由器分配的内网IP
本地通信端口：用来和暴露在外网上的端口映射的，别人的数据通过外网端口进，从本地通信端口出，进入服 务器
通信协议：有TCP和UDP两种，不同情况选不同的

### DMZ
![](/assets/img/2017-12-23-2.jpg)

这个很简单，直接填要暴露的设备的ip就行，同样是路由器分配的内网IP

需要注意的是，以上两种功能都需要把路由器分配给设备的IP固定，例如把设备的IP与mac地址绑定起来
![](/assets/img/2017-12-23-3.jpg)
